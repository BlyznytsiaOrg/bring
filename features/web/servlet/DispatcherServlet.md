# DispatcherServlet

The `DispatcherServlet` class extends `FrameworkServlet` and serves as the central dispatcher for handling HTTP requests in a RESTful web application. It processes incoming requests, resolves appropriate controllers, and manages response generation.

## Key Constants

- `REST_CONTROLLER_PARAMS`: Key for storing REST controller parameters in the servlet context.
- `REGEX_STATIC_URL`: Regular expression for matching static URLs.

## Key Components

- `responseAnnotationResolver`: List of response annotation resolvers for handling custom annotations on controller methods.
- `objectMapper`: Object mapper for converting between JSON and Java objects.

## Methods

### `processRequest(HttpServletRequest req, HttpServletResponse resp)`

Overrides the `processRequest` method of `FrameworkServlet`. Processes incoming HTTP requests by obtaining REST controller parameters and delegating the processing to `processRestControllerRequest`.

### `getRestControllerParams(HttpServletRequest req)`

Retrieves the `RestControllerParams` for the given `HttpServletRequest`. The method uses the request's method and path to find the corresponding controller parameters stored in the servlet context. It filters the parameters based on the path and path variables, then returns the first match. If no match is found, it throws a `MissingApplicationMappingException`.

### `checkParams(String requestPath, RestControllerParams params)`

Checks if the given `RestControllerParams` match the provided request path. If the controller method has path variables, it shortens the request path accordingly. The method returns true if the paths match, considering path variables and static URLs.

### `processRestControllerRequest(RestControllerParams params, HttpServletRequest req, HttpServletResponse resp)`

Processes the HTTP request for a specific `RestControllerParams`. Invokes the corresponding controller method with the provided arguments and handles the resulting response.

### `getRestControllerProcessResult(Object instance, Method method, HttpServletResponse resp, Object... args)`

Invokes the controller method with the provided arguments and handles the resulting response. If the method returns a non-null result, it is passed to the `performResponse` method along with method metadata (e.g., annotations). The response is then written to the provided `HttpServletResponse`.

### `performResponse(RestControllerProcessResult processResult, HttpServletResponse resp)`

Handles the response generated by a controller method. Checks for custom response annotations using registered `ResponseAnnotationResolver`s, applies the annotations if found, and then writes the response to the provided `HttpServletResponse`.

### Other Utility Methods

- `checkIfUrlIsStatic(String requestPath, String paramPath)`: Checks if the provided request path and parameter path match a static URL pattern.
- `checkIfPathVariableAnnotationIsPresent(Parameter[] parameters)`: Checks if any of the given parameters are annotated with `PathVariable`.
- `prepareArgs(HttpServletRequest req, HttpServletResponse resp, String requestPath, Method method)`: Prepares the arguments for invoking a controller method.
- Methods for extracting values of path variables, request parameters, request body, and request headers.
